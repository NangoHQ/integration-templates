integrations:
    github:
        syncs:
            issues:
                runs: every half hour
                output: GithubIssue
                sync_type: full
                scopes: public_repo
                description: |
                    Fetches Github issues from all a user's repositories
                endpoint:
                    method: GET
                    path: /github/issues
            issues-lite:
                runs: every day
                auto_start: false
                sync_type: full
                output: Issue
                scopes: public_repo
                description: |
                    Fetches Github issues but up to a maximum of 15
                endpoint:
                    method: GET
                    path: /github/issues-lite
            list-files:
                runs: every hour
                description: |
                    Lists all the files of a Github repo given a specific branch
                sync_type: incremental
                auto_start: false
                input: GithubIssueRepoInput
                output: GithubRepoFile
                endpoint:
                    method: GET
                    path: /files
                    group: Files
                scopes: repo
                version: 1.0.0
            pull-requests:
                runs: every hour
                description: |
                    Get all pull requests from a Github repository.
                auto_start: false
                sync_type: incremental
                endpoint:
                    - method: GET
                      path: /pull-requests
                      group: Pull Requests
                    - method: GET
                      path: /pull-request-comments
                      group: Pull Requests
                    - method: GET
                      path: /pull-request-reviews
                      group: Pull Requests
                input: GithubConnectionMetadata
                output:
                    - GithubPullRequest
                    - GithubPullRequestComment
                    - GithubPullRequestReviewThreadComment
            commits:
                runs: every hour
                description: |
                    Get all pull commits from a Github repository.
                auto_start: false
                sync_type: incremental
                endpoint:
                    method: GET
                    path: /commits
                    group: Commits
                input: GithubConnectionMetadata
                output: GithubCommit

        actions:
            write-file:
                scopes: repo
                input: GithubWriteFileInput
                output: GithubWriteFileActionResult
                endpoint:
                    method: PUT
                    path: /files
                    group: Files
                description: |
                    Write content to a particular github file within a repo. If
                    the file doesn't exist it creates and then writes to it
                version: 1.0.0
            list-repos:
                scopes: read:org
                endpoint:
                    method: GET
                    path: /github/list-repos
                output: GithubRepo
                description: |
                    List github repos from an organization.
models:
    Issue:
        id: integer
        __extends: GithubIssue
    GithubIssueRepoInput:
        owner: string
        repo: string
        branch: string
    GithubIssue:
        id: integer
        owner: string
        repo: string
        issue_number: number
        title: string
        author: string
        author_id: string
        state: string
        date_created: date
        date_last_modified: date
        body: string
    GithubRepo:
        id: integer
        owner: string
        name: string
        full_name: string
        description: string
        url: string
        date_created: date
        date_last_modified: date
    GithubRepoFile:
        id: string
        name: string
        url: string
        last_modified_date: date
    GithubWriteFileInput:
        owner: string
        repo: string
        path: string
        message: string
        content: string
        sha: string | undefined
    GithubWriteFileActionResult:
        url: string
        status: string
        sha: string
    GithubConnectionMetadata:
        repo: string
        connection_ids: string[]
        lastSyncCheckPoint?:
            __string?: string | null
    BaseInfo:
        id?: string
        timestamp?: string
        integrationId: string
    BaseActivityData:
        timestamp: string
        sourceId: string
        sourceParentId?: string
        platform: string
        channel: string
        title?: string
        body?: string
        url?: string
        isContribution: boolean
        type: string
        score: number
    PullRequestAttributesOpen:
        state: string
        additions: number
        deletions: number
        changedFiles: number
        authorAssociation: string
        labels: string[]
    PullRequestAttributesReviewed:
        reviewState: string
        state: string
        additions: number
        deletions: number
        changedFiles: number
        authorAssociation: string
        labels: string[]
    Member:
        displayName: string
        identities: Identity[]
    Identity:
        platform: string
        value: string
        type: string
        verified: boolean
        sourceId: string
    GithubMember:
        __extends: Member
        attributes: GithubMemberAttributes
    GithubMemberAttributes:
        isHireable: boolean
        url: string
        bio: string
        location: string
        avatarUrl: string
        company: string
        isBot: boolean
        websiteUrl?: string
    GithubPullRequest:
        __extends: BaseInfo
        activityData:
            __extends: BaseActivityData
            sourceParentId?: string
            attributes?: PullRequestAttributesOpen | PullRequestAttributesReviewed
            member: GithubMember
            objectMembers?: GithubMember[] | undefined
    GithubPullRequestComment:
        __extends: GithubPullRequest
    GithubPullRequestReviewThreadComment:
        __extends: GithubPullRequest
    GithubCommit:
        __extends: BaseInfo
        activityData:
            __extends: BaseActivityData
            attributes:
                insertions: number
                deletions: number
                lines: number
                isMerge: boolean
            member: GithubMember
        repos?: string[]
